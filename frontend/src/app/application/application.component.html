<app-navbar></app-navbar>
<div class="fullscreen uk-grid-collapse uk-child-width-expand@s" uk-grid>
	<div class="section-primary uk-flex uk-flex-middle uk-width-1-3@m">
		<div class="uk-container uk-container-supersmall leftBox uk-flex uk-flex-column ">
				<div><h1 class="h1-light">Application</h1></div>
        <div><button class="uk-button negative p-large-dark" [routerLink]="['/login']">Logout</button></div>
		</div>
	</div>
	<div class="uk-flex uk-flex-middle uk-width-2-3@m rightContainer" style="padding-top: 4em;">
		<div class="fullwidth uk-container uk-container-supersmall floating-box">
      <form class="uk-form-stacked" name="form" (ngSubmit)="f.form.valid && apply()" #f="ngForm" novalidate>

        <div class="uk-margin">
            <label class="uk-form-label p-small" for="form-stacked-text">Class Year</label>
            <div class="uk-form-controls">
              <select class="uk-input" [ngClass]="{'invalidInput':(f.submitted && !model.class_year)}" [(ngModel)]="model.class_year" #class_year="ngModel" name="class_year"  required>
                <option *ngFor="let year of class_years" [value]="year.value">
                  {{year.viewValue}}
                </option>
              </select>
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label p-small" for="form-stacked-text">Graduation Year</label>
            <div class="uk-form-controls">
              <select class="uk-input" [ngClass]="{'invalidInput':(f.submitted && !model.grad_year)}" [(ngModel)]="model.grad_year" #grad_year="ngModel" name="grad_year"  required>
                <option *ngFor="let year of grad_years" [value]="year">
                  {{year}}
                </option>
              </select>
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label p-small" for="form-stacked-text">Major</label>
            <div class="uk-form-controls">
								<ng-autocomplete (selected)="selectedMajor($event)" [classes]="['']" [group]="majorsAutocomplete" name="major" type="major" id="major" required></ng-autocomplete>
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label p-small" for="form-stacked-text">How did you hear about us?</label>
            <div class="uk-form-controls">
              <select class="uk-input" [ngClass]="{'invalidInput':(f.submitted && !model.referral)}" [(ngModel)]="model.referral" #referral="ngModel" name="referral"  required>
                <option *ngFor="let referral of referrals" [value]="referral.value">
                  {{referral.viewValue}}
                </option>
              </select>
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label p-small" for="form-stacked-text">Hackathon Count</label>
            <div class="uk-form-controls">
                <input class="uk-input" name="hackathon_count" type="number" min="0" [(ngModel)]="model.hackathon_count" #hackathon_count="ngModel" required>
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label p-small" for="form-stacked-text">Dietary Restrictions</label>
            <div class="uk-form-controls">
                <input class="uk-input" name="dietary_restrictions" type="text"  [(ngModel)]="model.dietary_restrictions" #dietary_restrictions="ngModel" required>
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label p-small" for="form-stacked-text">Shirt Size</label>
            <div class="uk-form-controls">
              <select class="uk-input" [ngClass]="{'invalidInput':(f.submitted && !model.shirt_size)}" [(ngModel)]="model.shirt_size" #shirt_size="ngModel" name="shirt_size"  required>
                <option *ngFor="let size of shirt_sizes" [value]="size.value">
                  {{size.viewValue}}
                </option>
              </select>
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label p-small" for="form-stacked-text">Personal Website or GitHub Link</label>
            <div class="uk-form-controls">
                <input class="uk-input" name="website" type="text"  [(ngModel)]="model.website" #website="ngModel">
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label p-small" for="form-stacked-text">Long Answer 1</label>
            <div class="uk-form-controls">
                <textarea class="uk-textarea" name="longanswer_1" type="text" minlength="140" maxlength="1000" rows="5" [(ngModel)]="model.longanswer_1" #longanswer_1="ngModel" required></textarea>
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label p-small" for="form-stacked-text">Long Answer 2</label>
            <div class="uk-form-controls">
                <textarea class="uk-textarea" name="longanswer_2" type="text" minlength="140" maxlength="1000" rows="5" [(ngModel)]="model.longanswer_2" #longanswer_2="ngModel" required></textarea>
            </div>
        </div>

        <div class="uk-margin">
            <label class="uk-form-label p-small" for="form-stacked-text">Upload Your Resume (Optional but highly recommended)</label>
            <div class="js-upload uk-placeholder uk-text-center p-small">
              <div *ngIf='filename; else elseBlock'>
                <span uk-icon="icon: copy"></span> {{filename}}
              </div>
              <ng-template #elseBlock>
                <span uk-icon="icon: cloud-upload"></span>
                <span class="uk-text-middle">Attach a resume by dropping it here or</span>
                  <div class="js-upload" uk-form-custom>
                    <input id="resume" type="file" name="file" (change)="setFile($event)" accept=".pdf"/>
                    <span class="uk-link">selecting one</span>
                  </div>
              </ng-template>
          </div>
            <!-- <div class="uk-form-controls">
              <a class="ui-button upload-btn">
                <div *ngIf='filename; else elseBlock'>
                  {{filename}}
                </div>
                <ng-template #elseBlock><i class="fa fa-upload" aria-hidden="true"></i> {{(model.resume && model.resume.filename_original) ? model.resume.filename_original : "Upload"}} </ng-template>
                <input id="resume" type="file" name="resume" (change)="setFile($event)" accept=".pdf"/>
              </a>
            </div> -->
        </div>

      <div class="uk-align-right">
        <button class="uk-button p-large-dark" [disabled]="loading" mdRippleColor="#F00" type="submit">
          <div *ngIf='appSubmitted'>
            Update Application
          </div>
          <div *ngIf='!appSubmitted'>Submit</div>
        </button>
      </div>
      <div *ngIf="f.submitted && f.form.invalid" class="help-block">Some fields are missing and/or invalid.</div>
      <div
        *ngIf="loading"
        color="primary"
        mode="indeterminate"
        class="spinner">
        Loading...
      </div>

      </form>
		</div>
	</div>
</div>
